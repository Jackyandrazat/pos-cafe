{
    "info": {
        "name": "POS Cafe API v1",
        "_postman_id": "5f76f5df-f51d-4bc7-aadd-31d77b7feb4e",
        "description": "Collection to exercise the POS Cafe public catalogue and authenticated order management APIs.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Guest Sign-In",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Walk-in Guest\",\n    \"phone\": \"+62 81234567890\"\n}",
                            "options": { "raw": { "language": "json" } }
                        },
                        "url": "{{base_url}}/auth/guest",
                        "description": "Creates a guest user and returns a Sanctum token. Save the token into the `auth_token` variable for subsequent calls."
                    }
                }
            ]
        },
        {
            "name": "Catalogue",
            "item": [
                {
                    "name": "List Menus",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" }
                        ],
                        "url": "{{base_url}}/menus?category_id={{category_id}}&search=coffee&is_available=true&per_page=20",
                        "description": "Returns paginated menu items. Optional query params: `category_id`, `search`, `is_available` (true/false), `per_page` (1-50)."
                    }
                },
                {
                    "name": "Get Menu Detail",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" }
                        ],
                        "url": "{{base_url}}/menus/{{menu_id}}",
                        "description": "Fetches a single menu item by product ID."
                    }
                },
                {
                    "name": "List Categories",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" }
                        ],
                        "url": "{{base_url}}/categories",
                        "description": "Returns all menu categories with their menu counts."
                    }
                }
            ]
        },
        {
            "name": "Orders",
            "item": [
                {
                    "name": "List Orders",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders?status=pending&per_page=10",
                        "description": "Lists the authenticated user's orders. Optional query params: `status` (draft|pending|confirmed|preparing|ready|completed|cancelled), `per_page` (1-50)."
                    }
                },
                {
                    "name": "Create Order",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"order_type\": \"dine_in\",\n    \"table_id\": {{table_id}},\n    \"customer_name\": \"John Doe\",\n    \"notes\": \"Less sugar, please\",\n    \"items\": [\n        {\n            \"menu_id\": {{menu_id}},\n            \"quantity\": 2,\n            \"discount_amount\": 0\n        }\n    ]\n}",
                            "options": { "raw": { "language": "json" } }
                        },
                        "url": "{{base_url}}/orders",
                        "description": "Creates a draft order with one or more items. `order_type` accepts dine_in, take_away, or delivery."
                    }
                },
                {
                    "name": "Get Order Detail",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders/{{order_id}}",
                        "description": "Returns the specified order with its line items."
                    }
                },
                {
                    "name": "Submit Order",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders/{{order_id}}/submit",
                        "description": "Transitions a draft order to pending. The order must have at least one item."
                    }
                },
                {
                    "name": "Cancel Order",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders/{{order_id}}/cancel",
                        "description": "Cancels an order that is draft, pending, or confirmed."
                    }
                }
            ]
        },
        {
            "name": "Order Items",
            "item": [
                {
                    "name": "Add Order Item",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"menu_id\": {{menu_id}},\n    \"quantity\": 1,\n    \"discount_amount\": 0\n}",
                            "options": { "raw": { "language": "json" } }
                        },
                        "url": "{{base_url}}/orders/{{order_id}}/items",
                        "description": "Adds a new item or increases the quantity if the product already exists on the draft order."
                    }
                },
                {
                    "name": "Update Order Item",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"quantity\": 2,\n    \"discount_amount\": 5000\n}",
                            "options": { "raw": { "language": "json" } }
                        },
                        "url": "{{base_url}}/orders/{{order_id}}/items/{{order_item_id}}",
                        "description": "Replaces the quantity/discount of an existing order item."
                    }
                },
                {
                    "name": "Delete Order Item",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders/{{order_id}}/items/{{order_item_id}}",
                        "description": "Removes an item from a draft order."
                    }
                }
            ]
        },
        {
            "name": "Order Status",
            "item": [
                {
                    "name": "Get Order Status Timeline",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders/{{order_id}}/status",
                        "description": "Shows the current order status and the full status history."
                    }
                }
            ]
        },
        {
            "name": "Payments",
            "item": [
                {
                    "name": "List Order Payments",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/orders/{{order_id}}/payments",
                        "description": "Lists all recorded payments for an order."
                    }
                },
                {
                    "name": "Create Payment",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"payment_method\": \"cash\",\n    \"amount\": 100000\n}",
                            "options": { "raw": { "language": "json" } }
                        },
                        "url": "{{base_url}}/orders/{{order_id}}/payments",
                        "description": "Records a payment. Methods: cash, qris, transfer, ewallet."
                    }
                },
                {
                    "name": "Get Payment Detail",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "url": "{{base_url}}/payments/{{payment_id}}",
                        "description": "Fetches a single payment by ID."
                    }
                }
            ]
        }
    ],
    "variable": [
        { "key": "base_url", "value": "http://localhost:8000/api/v1" },
        { "key": "auth_token", "value": "" },
        { "key": "menu_id", "value": "1" },
        { "key": "category_id", "value": "1" },
        { "key": "order_id", "value": "1" },
        { "key": "order_item_id", "value": "1" },
        { "key": "payment_id", "value": "1" },
        { "key": "table_id", "value": "1" }
    ]
}
